CREATE TABLE producto (id SERIAL PRIMARY KEY, nombre VARCHAR(255) NOT NULL UNIQUE);
CREATE TABLE marca (id SERIAL PRIMARY KEY, nombre VARCHAR(128) NOT NULL UNIQUE);
CREATE TABLE genero (id SERIAL PRIMARY KEY, nombre VARCHAR(128) NOT NULL UNIQUE);
CREATE TABLE talla (id SERIAL PRIMARY KEY, nombre VARCHAR(24) NOT NULL UNIQUE);
CREATE TABLE etapa (id SERIAL PRIMARY KEY, nombre VARCHAR(64) NOT NULL UNIQUE);
CREATE TABLE talla_etapa (id SERIAL PRIMARY KEY, id_talla INT REFERENCES talla(id) NOT NULL, id_etapa INT REFERENCES etapa(id) NOT NULL); 
CREATE TABLE categoria (id SERIAL PRIMARY KEY, nombre VARCHAR(64) NOT NULL UNIQUE);
CREATE TABLE tono (id SERIAL PRIMARY KEY, nombre VARCHAR(24) NOT NULL UNIQUE);
CREATE TABLE color (id SERIAL PRIMARY KEY, nombre VARCHAR(24) NOT NULL UNIQUE);
CREATE TABLE color_tono (id SERIAL PRIMARY KEY, id_color INT REFERENCES color(id) NOT NULL, id_tono INT REFERENCES tono(id) NOT NULL); 
CREATE TABLE temporada (id SERIAL PRIMARY KEY, nombre VARCHAR(24) NOT NULL UNIQUE);
CREATE TABLE estado (id SERIAL PRIMARY KEY, nombre VARCHAR(16) NOT NULL UNIQUE);
CREATE TABLE pago (id SERIAL PRIMARY KEY, nombre VARCHAR(64) NOT NULL UNIQUE);
CREATE TABLE especificacion (id SERIAL PRIMARY KEY, id_producto INT REFERENCES producto(id) NOT NULL, id_marca INT REFERENCES marca(id) NOT NULL, id_temporada INT REFERENCES temporada(id) DEFAULT NULL, id_categoria INT REFERENCES categoria(id) NOT NULL, id_genero INT REFERENCES genero(id) NOT NULL, id_color_tono INT REFERENCES color_tono(id) NOT NULL, id_talla_etapa INT REFERENCES talla_etapa(id) NOT NULL, descripcion VARCHAR(1024) DEFAULT NULL);
CREATE TABLE tipo (id SERIAL PRIMARY KEY, nombre VARCHAR(64) NOT NULL UNIQUE);
CREATE TABLE especificacion_tipo (id SERIAL PRIMARY KEY, id_especificacion INT REFERENCES especificacion(id) NOT NULL, id_tipo INT REFERENCES tipo(id) NOT NULL); 
CREATE TABLE inventario (id SERIAL PRIMARY KEY, id_especificacion INT REFERENCES especificacion(id) NOT NULL, id_talla INT REFERENCES talla(id) NOT NULL, id_estado INT REFERENCES estado(id) NOT NULL, cantidad INT NOT NULL, precio DECIMAL(2) NOT NULL, fecha_ingreso DATE NOT NULL DEFAULT NOW());
CREATE TABLE venta (id SERIAL PRIMARY KEY, id_pago INT REFERENCES pago(id), id_inventario INT REFERENCES inventario(id), fecha DATE NOT NULL DEFAULT NOW());
CREATE TABLE historial_precio (id SERIAL PRIMARY KEY, id_inventario INT REFERENCES inventario(id) NOT NULL, fecha DATE NOT NULL DEFAULT NOW(), precio DECIMAL(2) NOT NULL);
